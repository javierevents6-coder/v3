import{c as pe,j as e,r as I,C as ge,J as we,K as fe,N as Ce,B as me,b as ie,d as te,h as _e,i as Se,k as ve,X as le,y as Ee,O as Te,z as Ae,A as Pe,q as Re,o as $e,g as Ie,S as re,u as Oe}from"./index-CpkSNde8.js";import{m as se}from"./maternityData-C78G56Za.js";import{a as ce,A as ue,C as ke,f as ne,g as De,p as he}from"./pdf-DmRgbWAs.js";import{B as Y}from"./Button-XvagTv2p.js";import{s as ye}from"./sessionsData-BZRD4jWn.js";import{a as je}from"./eventsData-BPEvb_2b.js";import{r as Me}from"./index-Chjiymov.js";import{C as Q}from"./check-circle-jwuhIQoi.js";import{f as Fe}from"./format-Du_wWAPl.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=pe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=pe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),be=[{id:"dress-1",name:"Vestido Azul Royal",color:"Azul",image:"https://images.pexels.com/photos/291759/pexels-photo-291759.jpeg?auto=compress&cs=tinysrgb&w=1600"},{id:"dress-2",name:"Vestido Branco",color:"Branco",image:"https://images.pexels.com/photos/1631181/pexels-photo-1631181.jpeg?auto=compress&cs=tinysrgb&w=1600"},{id:"dress-3",name:"Vestido Rosa",color:"Rosa",image:"https://images.pexels.com/photos/1755385/pexels-photo-1755385.jpeg?auto=compress&cs=tinysrgb&w=1600"},{id:"dress-4",name:"Vestido Verde",color:"Verde",image:"https://images.pexels.com/photos/1375736/pexels-photo-1375736.jpeg?auto=compress&cs=tinysrgb&w=1600"},{id:"dress-5",name:"Vestido Vermelho",color:"Vermelho",image:"https://images.pexels.com/photos/1755428/pexels-photo-1755428.jpeg?auto=compress&cs=tinysrgb&w=1600"},{id:"dress-6",name:"Vestido Dourado",color:"Dourado",image:"https://images.pexels.com/photos/1755433/pexels-photo-1755433.jpeg?auto=compress&cs=tinysrgb&w=1600"},{id:"dress-7",name:"Vestido Preto",color:"Preto",image:"https://images.pexels.com/photos/1755432/pexels-photo-1755432.jpeg?auto=compress&cs=tinysrgb&w=1600"},{id:"dress-8",name:"Vestido Prata",color:"Prata",image:"https://images.pexels.com/photos/1755429/pexels-photo-1755429.jpeg?auto=compress&cs=tinysrgb&w=1600"}],qe=({dresses:t,maxSelections:a,selectedDresses:s,onChange:n})=>{const o=r=>{if(s.includes(r))n(s.filter(m=>m!==r));else if(s.length<a)if(s.length===a){const m=[...s.slice(1),r];n(m)}else n([...s,r])};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Seleção de Vestidos"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.length," de ",a," selecionados"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map(r=>e.jsxs("div",{className:`relative cursor-pointer ${s.length>=a&&!s.includes(r.id)?"opacity-50":""}`,onClick:()=>o(r.id),children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg",children:e.jsx("img",{loading:"lazy",src:r.image,alt:r.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:`absolute inset-0 rounded-lg border-2 ${s.includes(r.id)?"border-secondary bg-black/20":"border-transparent"}`,children:s.includes(r.id)&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-white",children:"✓"})}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.color})]},r.id))}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:a===1?"Selecione 1 vestido para esta sessão":`Selecione até ${a} vestidos para esta sessão`})]})},Ue=({cartItems:t,travelCost:a,paymentMethod:s,formData:n={}})=>{const o=c=>r(c.price)*c.quantity,r=c=>typeof c=="string"?Number(c.replace(/[^0-9]/g,"")):c,m=()=>{const c=t.reduce((P,v,V)=>{const B=o(v);return n[`discountCoupon_${V}`]==="FREE"&&v.id&&v.id.includes("prewedding")&&!v.id.includes("teaser")?P:P+B},0),p=(n.storeItems||[]).reduce((P,v)=>P+Number(v.price)*Number(v.quantity),0),E=c+p+a,i=s==="cash"?E*.05:0,y=t.reduce((P,v,V)=>n[`discountCoupon_${V}`]==="FREE"&&v.id&&v.id.includes("prewedding")&&!v.id.includes("teaser")?P+o(v):P,0)+i,b=E-y,S=t.reduce((P,v,V)=>{const B=o(v);return n[`discountCoupon_${V}`]==="FREE"&&v.id&&v.id.includes("prewedding")&&!v.id.includes("teaser")?P:P+B},0),R=Math.max(0,Math.round(S*.2*100)/100),C=Math.max(0,Math.round(p*.5*100)/100),j=Math.max(0,Math.round((R+C)*100)/100),O=Math.max(0,Math.round((b-j)*100)/100);return{subtotal:E,discount:y,total:b,deposit:j,remaining:O,depositServices:R,depositStore:C}},{subtotal:l,discount:h,total:d,deposit:g,remaining:N,depositServices:_,depositStore:u}=m(),T={cash:e.jsx(ze,{className:"w-4 h-4"}),credit:e.jsx(ce,{className:"w-4 h-4"}),pix:e.jsx(Le,{className:"w-4 h-4"})},w={cash:"Dinheiro (5% desconto)",credit:"Cartão de Crédito",pix:"PIX"};return!t||t.length===0&&(!n.storeItems||n.storeItems.length===0)?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Resumo do Pedido"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum serviço selecionado"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-normal text-red-600 mb-1",children:["R$ ",d.toFixed(2).replace(".",",")]}),h>0&&e.jsxs("div",{className:"text-sm text-gray-600 line-through",children:["Você economizou R$ ",h.toFixed(2).replace(".",","),"!"]})]})})," ",e.jsxs("div",{className:"p-6",children:[t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Serviços Contratados"}),e.jsx("div",{className:"space-y-4",children:t.map((c,p)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{loading:"lazy",src:c.image,alt:c.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900",children:c.name}),e.jsx("p",{className:"text-xs text-gray-600",children:c.duration})]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tipo:"}),e.jsx("span",{className:"text-gray-900 capitalize",children:c.type==="events"?"Eventos":c.type==="portrait"?"Retratos":c.type==="maternity"?"Gestantes":c.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Quantidade:"}),e.jsxs("span",{className:"text-gray-900",children:[c.quantity,"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Preço unitário:"}),e.jsx("span",{className:"text-gray-900",children:c.price})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{className:"text-gray-900",children:"Subtotal:"}),e.jsx("span",{className:"text-gray-900",children:(()=>{const E=n[`discountCoupon_${p}`],i=o(c);return E==="FREE"&&c.id&&c.id.includes("prewedding")&&!c.id.includes("teaser")?e.jsxs("span",{className:"space-x-2",children:[e.jsxs("span",{className:"line-through text-gray-500",children:["R$ ",i.toFixed(2).replace(".",",")]}),e.jsx("span",{className:"text-green-600 font-bold",children:"R$ 0,00"})]}):`R$ ${i.toFixed(2).replace(".",",")}`})()})]}),n[`discountCoupon_${p}`]==="FREE"&&c.id&&c.id.includes("prewedding")&&!c.id.includes("teaser")?e.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-center",children:e.jsx("span",{className:"text-green-600 text-sm font-medium",children:"🎉 Cupom FREE aplicado!"})}):null]})]},`cart-item-${p}`))})]}),n.storeItems&&n.storeItems.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Serviços adicionais"}),e.jsx("div",{className:"space-y-2",children:n.storeItems.map((c,p)=>e.jsxs("div",{className:"flex justify-between items-center text-sm bg-white rounded border p-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c.image_url?e.jsx("div",{className:"w-10 h-10 rounded overflow-hidden",children:e.jsx("img",{src:c.image_url,alt:c.name,className:"w-full h-full object-cover"})}):null,e.jsxs("span",{className:"text-gray-800",children:[c.name," (",c.quantity,"x)"]})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["R$ ",(Number(c.price)*Number(c.quantity)).toFixed(2).replace(".",",")]})]},`store-item-${p}`))})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[a>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxa de deslocamento:"}),e.jsxs("span",{className:"text-gray-900",children:["R$ ",a.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Forma de pagamento:"}),e.jsxs("span",{className:"text-gray-900 flex items-center gap-1",children:[T[s],w[s]]})]})]}),t.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"O que está incluído:"}),e.jsx("div",{className:"space-y-2",children:t.map((c,p)=>{var E;return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[c.name,":"]}),e.jsx("ul",{className:"space-y-1 ml-4",children:(E=c.features)==null?void 0:E.slice(0,3).map((i,x)=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"✓"}),i]},x))})]},`features-${p}`)})})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"i"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"Entrega"})]}),e.jsxs("div",{className:"text-sm text-gray-600 ml-8",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Fotos digitais:"})," 15 dias úteis"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Material físico:"})," 30 dias úteis"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ce,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Condições de Pagamento"})]}),e.jsxs("div",{className:"space-y-3",children:[_>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Sinal 20% Pacotes"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["R$ ",_.toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Sobre os pacotes de fotos"})]}),u>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Sinal 50% Adicionais"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["R$ ",u.toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Sobre os serviços adicionais"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Sinal Total"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["R$ ",g.toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Para confirmar a reserva"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Restante"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["R$ ",N.toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"text-xs text-gray-600",children:"No dia do evento"})]}),(()=>{const c=t.filter((p,E)=>n[`discountCoupon_${E}`]==="FREE"&&p.id&&p.id.includes("prewedding")&&!p.id.includes("teaser"));return c.length>0?e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Cupons Aplicados"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["- R$ ",c.reduce((p,E)=>p+o(E),0).toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"text-xs text-green-600",children:c.map((p,E)=>e.jsxs("div",{children:["• ",p.name," - Cupom FREE"]},E))})]}):null})(),h>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Desconto Pagamento (5%)"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["- R$ ",h.toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"text-xs text-green-600",children:"Por pagamento em dinheiro"})]}),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"bg-white rounded-lg p-3 border-2 border-green-500",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Final"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",d.toFixed(2).replace(".",",")]})]}),h>0&&e.jsxs("div",{className:"text-sm text-green-600 text-right mt-1",children:["Você economizou R$ ",h.toFixed(2).replace(".",","),"!"]})]})})]})]})]})};function Z(t){return t.replace(/\D/g,"")}function Be(t){const a=Z(t).slice(0,11),s=[a.slice(0,3),a.slice(3,6),a.slice(6,9),a.slice(9,11)];return[s[0],s[1]&&`.${s[1]}`,s[2]&&`.${s[2]}`,s[3]&&`-${s[3]}`].filter(Boolean).join("")}function Ve(t){const a=Z(t);if(a.length!==11||/^(\d)\1{10}$/.test(a))return!1;const s=(r,m)=>{let l=0;for(let d=0;d<r.length;d++)l+=parseInt(r[d],10)*(m-d);const h=l*10%11;return h===10?0:h},n=s(a.slice(0,9),10),o=s(a.slice(0,10),11);return n===parseInt(a[9],10)&&o===parseInt(a[10],10)}function Ge(t){const a=Z(t).slice(0,9),s=[a.slice(0,2),a.slice(2,5),a.slice(5,8),a.slice(8,9)];return[s[0],s[1]&&`.${s[1]}`,s[2]&&`.${s[2]}`,s[3]&&`-${s[3]}`].filter(Boolean).join("")}function We(t){const a=Z(t);return a.length>=8&&a.length<=10}function He(t){const a=Z(t).slice(0,11);if(a.length<=10){const n=[a.slice(0,2),a.slice(2,6),a.slice(6,10)];return[n[0]&&`(${n[0]})`,n[1],n[2]&&`-${n[2]}`].filter(Boolean).join(" ")}const s=[a.slice(0,2),a.slice(2,7),a.slice(7,11)];return[s[0]&&`(${s[0]})`,s[1],s[2]&&`-${s[2]}`].filter(Boolean).join(" ")}function Qe(t){const a=Z(t);return a.length===10||a.length===11}function Xe(t){return/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(t.toLowerCase())}const Ke=({value:t,onChange:a,min:s})=>{const n=new Date,[o,r]=I.useState(()=>{const u=t?new Date(t):n;return{year:u.getFullYear(),month:u.getMonth()}}),l=(new Date(o.year,o.month,1).getDay()+6)%7,h=new Date(o.year,o.month+1,0).getDate(),d=s?new Date(s):n,g=(u,T,w)=>`${u}-${String(T+1).padStart(2,"0")}-${String(w).padStart(2,"0")}`,N=Array.from({length:l},()=>null).concat(Array.from({length:h},(u,T)=>g(o.year,o.month,T+1))),_=u=>new Date(u)>=new Date(d.getFullYear(),d.getMonth(),d.getDate());return e.jsxs("div",{className:"border rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("button",{type:"button",onClick:()=>r(u=>({year:u.month===0?u.year-1:u.year,month:u.month===0?11:u.month-1})),className:"px-2 py-1 border rounded",children:"«"}),e.jsx("div",{className:"font-medium",children:new Date(o.year,o.month,1).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),e.jsx("button",{type:"button",onClick:()=>r(u=>({year:u.month===11?u.year+1:u.year,month:u.month===11?0:u.month+1})),className:"px-2 py-1 border rounded",children:"»"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500 mb-1",children:["S","T","Q","Q","S","S","D"].map((u,T)=>e.jsx("div",{children:u},`${u}-${T}`))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:N.map((u,T)=>u?e.jsx("button",{type:"button",disabled:!_(u),onClick:()=>a(u),className:`px-2 py-1 text-sm rounded ${t===u?"bg-primary text-white":"hover:bg-gray-100"} ${_(u)?"":"opacity-40 cursor-not-allowed"}`,children:Number(u.slice(-2))},T):e.jsx("div",{},T))})]})},Je=({value:t,onChange:a})=>{const[s,n]=(t||"").split(":"),o=Math.min(23,Math.max(0,parseInt(s||"12",10))),r=Math.min(59,Math.max(0,parseInt(n||"00",10))),m=h=>a(`${String(h).padStart(2,"0")}:${String(r).padStart(2,"0")}`),l=h=>a(`${String(o).padStart(2,"0")}:${String(h).padStart(2,"0")}`);return e.jsxs("div",{className:"border rounded-md p-3 space-y-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Selecione o horário (24h)"}),e.jsx("div",{className:"grid grid-cols-6 gap-1",children:Array.from({length:24},(h,d)=>e.jsx("button",{type:"button",onClick:()=>m(d),className:`text-xs px-2 py-1 rounded ${o===d?"bg-primary text-white":"hover:bg-gray-100"}`,children:String(d).padStart(2,"0")},d))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs w-14",children:"Minutos"}),e.jsx("input",{type:"range",min:0,max:59,step:5,value:r,onChange:h=>l(parseInt(h.target.value,10)),className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium w-10 text-right",children:String(r).padStart(2,"0")})]})]})},Ye=({initialData:t,packages:a,onSubmit:s,onBack:n,isStoreOnly:o=!1})=>{const[r,m]=I.useState({...t,discountCoupon:""}),[l,h]=I.useState({});I.useEffect(()=>{r.paymentMethod||m(i=>({...i,paymentMethod:"pix"}))},[]);const d=/troca de (?:até )?(\d+) looks?/i,g=i=>{if(!i)return 0;for(const x of i){const y=String(x).match(d);if(y)return parseInt(y[1],10)||0}return 0},N=i=>{const x=g(i==null?void 0:i.features);if(x)return x;const y=se.find(j=>j.id===(i==null?void 0:i.id));if(y!=null&&y.looks)return y.looks;const b=se.find(j=>j.title===(i==null?void 0:i.name));if(b!=null&&b.looks)return b.looks;const S=a==null?void 0:a.find(j=>j.id===(i==null?void 0:i.id)||j.title===(i==null?void 0:i.name)),R=g(S==null?void 0:S.features);if(R)return R;const C=Number((S==null?void 0:S.looks)||0);return C||0},_=i=>{m(x=>({...x,selectedDresses:i}))},u=i=>{const{name:x,value:y}=i.target;let b=y;x==="cpf"?b=Be(y):x==="rg"?b=Ge(y):x==="phone"?b=He(y):x==="email"?b=y.toLowerCase():x==="travelCost"&&(b=Number(y)||0),m(S=>({...S,[x]:b}))},T=()=>{const i=new Date,x=i.getFullYear(),y=String(i.getMonth()+1).padStart(2,"0"),b=String(i.getDate()).padStart(2,"0"),S=String(i.getHours()).padStart(2,"0"),R=String(i.getMinutes()).padStart(2,"0");return{date:`${x}-${y}-${b}`,time:`${S}:${R}`}},w=(i,x)=>!i||!x?!1:new Date(`${i}T${x}`)>new Date,c=()=>{const i={};let x;const y=(b,S)=>{i[b]||(i[b]=S),x||(x=b)};return r.name.trim()||y("name","Nome é obrigatório"),r.cpf.trim()?Ve(r.cpf)||y("cpf","CPF inválido"):y("cpf","CPF é obrigatório"),r.rg.trim()?We(r.rg)||y("rg","RG inválido"):y("rg","RG é obrigatório"),r.address.trim()||y("address","Endereço é obrigatório"),r.email.trim()?Xe(r.email)||y("email","Email inválido"):y("email","Email é obrigatório"),r.phone.trim()?Qe(r.phone)||y("phone","Telefone inválido"):y("phone","Telefone é obrigatório"),r.cartItems&&r.cartItems.length>0?r.cartItems.forEach((b,S)=>{r[`date_${S}`]||y(`date_${S}`,"Data é obrigatória"),r[`time_${S}`]||y(`time_${S}`,"Horário é obrigatório"),r[`date_${S}`]&&r[`time_${S}`]&&(w(r[`date_${S}`],r[`time_${S}`])||(y(`date_${S}`,"Data e horário devem ser futuros"),y(`time_${S}`,"Data e horário devem ser futuros"))),(!r[`eventLocation_${S}`]||!r[`eventLocation_${S}`].trim())&&y(`eventLocation_${S}`,"Localização é obrigatória")}):(!r.storeItems||r.storeItems.length===0)&&y("general","Nenhum serviço selecionado"),h(i),{isValid:Object.keys(i).length===0,firstErrorKey:x,errors:i}},p=i=>{var y;i.preventDefault();const x=c();if(x.isValid)window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>s(r),100);else if(x.firstErrorKey){const b=document.querySelector(`[name="${x.firstErrorKey}"]`);if(b&&typeof b.scrollIntoView=="function"){b.scrollIntoView({behavior:"smooth",block:"center"});try{(y=b.focus)==null||y.call(b)}catch{}}}},E=i=>typeof i=="string"?Number(i.replace(/[^0-9]/g,"")):i;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 pt-32",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsx("div",{className:"mb-8",children:o?e.jsx("h1",{className:"text-3xl font-playfair mb-2",children:"Preencha os dados para garantir sua compra."}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-playfair mb-2",children:"Reservar Sessão ou Evento"}),e.jsx("p",{className:"text-gray-600",children:"Preencha os dados abaixo para finalizar sua reserva"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:p,className:"bg-white shadow-md p-8 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-medium mb-6 pb-2 border-b",children:"Informações Pessoais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome completo *"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:u,className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${l.name?"border-red-500":"border-gray-300"}`,placeholder:"Seu nome completo"}),l.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF *"}),e.jsx("input",{type:"text",name:"cpf",value:r.cpf,onChange:u,className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${l.cpf?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00"}),l.cpf&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.cpf})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RG *"}),e.jsx("input",{type:"text",name:"rg",value:r.rg,onChange:u,className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${l.rg?"border-red-500":"border-gray-300"}`,placeholder:"00.000.000-0"}),l.rg&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.rg})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço completo *"}),e.jsx("input",{type:"text",name:"address",value:r.address,onChange:u,className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${l.address?"border-red-500":"border-gray-300"}`,placeholder:"Rua, número, bairro, cidade, CEP"}),l.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:u,className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${l.email?"border-red-500":"border-gray-300"}`,placeholder:"seu@email.com"}),l.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:u,className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${l.phone?"border-red-500":"border-gray-300"}`,placeholder:"(00) 00000-0000"}),l.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.phone})]})]})]}),r.cartItems&&r.cartItems.length>0?r.cartItems.map((i,x)=>e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-medium mb-6 pb-2 border-b",children:["Informações do Serviço ",r.cartItems.length>1?`#${x+1}`:"",r.cartItems.length>1&&e.jsxs("span",{className:"text-base font-normal text-gray-600 ml-2",children:["(",i.name,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Serviço *"}),e.jsx("input",{type:"text",value:i.type==="events"?"Eventos":i.type==="portrait"?"Retratos":i.type==="maternity"?"Gestantes":i.type,className:"input-base bg-gray-50",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pacote *"}),e.jsx("input",{type:"text",value:`${i.name} - ${i.price}`,className:"input-base bg-gray-50",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duração"}),e.jsx("input",{type:"text",value:i.duration,className:"input-base bg-gray-50",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade"}),e.jsx("input",{type:"text",value:`${i.quantity} ${i.quantity===1?"sessão":"sessões"}`,className:"input-base bg-gray-50",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data *"}),e.jsx(Ke,{value:r[`date_${x}`]||"",onChange:y=>m(b=>({...b,[`date_${x}`]:y})),min:T().date}),l[`date_${x}`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l[`date_${x}`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horário *"}),e.jsx(Je,{value:r[`time_${x}`]||"",onChange:y=>m(b=>({...b,[`time_${x}`]:y}))}),l[`time_${x}`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l[`time_${x}`]})]}),i.type==="maternity"&&e.jsx("div",{className:"md:col-span-2",children:e.jsx(qe,{dresses:be,maxSelections:N(i),selectedDresses:r.selectedDresses||[],onChange:_})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Localização do Evento *",e.jsx("a",{href:"https://maps.google.com",target:"_blank",rel:"noopener noreferrer",className:"ml-2 link-luxe text-sm",children:"(Buscar no Google Maps)"})]}),e.jsx("input",{type:"text",name:`eventLocation_${x}`,value:r[`eventLocation_${x}`]||"",onChange:y=>m(b=>({...b,[`eventLocation_${x}`]:y.target.value})),className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${l[`eventLocation_${x}`]?"border-red-500":"border-gray-300"}`,placeholder:"Endereço completo do evento ou link do Google Maps"}),l[`eventLocation_${x}`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l[`eventLocation_${x}`]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Você pode colar o link do Google Maps aqui para maior precisão"})]})]}),e.jsxs("div",{className:"md:col-span-2 mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cupom de Desconto"}),e.jsx("input",{type:"text",name:`discountCoupon_${x}`,value:r[`discountCoupon_${x}`]||"",onChange:y=>m(b=>({...b,[`discountCoupon_${x}`]:y.target.value})),className:`input-base focus:outline-none focus:ring-2 focus:ring-secondary ${(()=>{const y=r[`discountCoupon_${x}`];return!y||y.trim()===""?"border-gray-300 text-gray-900":y==="FREE"&&i.id&&i.id.includes("prewedding")&&!i.id.includes("teaser")?"border-green-500 text-green-600 bg-green-50":"border-red-500 text-red-600 bg-red-50"})()}`,placeholder:"Insira seu cupom de descuento"}),(()=>{const y=r[`discountCoupon_${x}`];return!y||y.trim()===""?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Insira seu cupom de desconto se disponível"}):y==="FREE"&&i.id&&i.id.includes("prewedding")&&!i.id.includes("teaser")?e.jsx("p",{className:"text-xs text-green-600 mt-1 font-medium",children:"��� Cupom aplicado com sucesso! Desconto de 100%"}):e.jsx("p",{className:"text-xs text-red-600 mt-1 font-medium",children:"❌ Cupom inválido ou não aplicável a este serviço"})})()]})]},`service-${x}`)):!r.storeItems||r.storeItems.length===0?e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-medium mb-6 pb-2 border-b",children:"Informações do Servi��o"}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4",children:e.jsx("p",{className:"text-yellow-800",children:"Nenhum serviço selecionado. Por favor, adicione serviços ao carrinho primeiro."})})]}):null,r.storeItems&&r.storeItems.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-medium mb-6 pb-2 border-b",children:"Serviços adicionais contratados"}),e.jsx("div",{className:"bg-gray-50 p-6 border border-gray-200",children:e.jsx("div",{className:"space-y-3",children:r.storeItems.map((i,x)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-800",children:[i.name," (",i.quantity,"x)"]}),e.jsx("span",{className:"font-medium text-gray-900",children:E(Number(i.price)*Number(i.quantity))})]},`store-form-${x}`))})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-medium mb-6 pb-2 border-b",children:"Configurações Gerais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[!o&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa de Deslocamento (R$)"}),e.jsx("input",{type:"number",name:"travelCost",value:r.travelCost,onChange:u,className:"input-base focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento *"}),e.jsxs("select",{name:"paymentMethod",value:r.paymentMethod,onChange:u,className:"input-base focus:outline-none focus:ring-2 focus:ring-secondary",children:[e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"credit",children:"Cartão de Crédito"}),e.jsx("option",{value:"cash",children:"Dinheiro (5% desconto)"})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-medium mb-6 pb-2 border-b",children:"Informações Adicionais"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),e.jsx("textarea",{name:"message",value:r.message,onChange:u,rows:4,className:"input-base focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"Informações adicionais sobre o evento..."})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:n,className:"btn-secondary mr-2",children:"Voltar ao Contrato"}),e.jsx("button",{type:"submit",className:"btn-primary ml-2",children:"Revisar e Assinar"})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ue,{cartItems:r.cartItems||[],travelCost:r.travelCost,paymentMethod:r.paymentMethod,formData:r})})]})]})})},Ze=({onAccept:t,onReject:a})=>{const s=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>t(),100)};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"max-w-4xl mx-auto py-12 px-6",children:[e.jsxs("div",{className:"bg-white text-primary border-b-2 border-primary p-8 text-center relative rounded-t-lg",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(ge,{size:32})}),e.jsx("h1",{className:"text-3xl font-playfair mb-2 text-primary",children:"CONTRATO DE PRESTAÇÃO DE SERVIÇOS FOTOGRÁFICOS"}),e.jsx("p",{className:"text-lg text-primary",children:"Wild Pictures Studio"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-b-lg p-8 space-y-8",children:[e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-r-lg",children:[e.jsx("p",{className:"text-red-700 font-bold mb-2 text-lg",children:"IMPORTANTE:"}),e.jsx("p",{className:"text-red-600 leading-relaxed",children:"Qualquer dado incorreto ou campo vazio no preenchimento deste contrato resultará no imediato CANCELAMENTO DO CONTRATO. Além disso, a DIREÇÃO DO EVENTO DEVE SER INFORMADA DE FORMA CORRETA, incluindo rua, número e bairro, para evitar quaisquer problemas logísticos e operacionais."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"contract-section",children:[e.jsx("h2",{className:"section-title",children:"CLÁUSULA 1ª – DAS OBRIGAÇÕES DO(A) CONTRATADO(A)"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"Comparecer ao evento com antecedência suficiente, de modo a garantir o fiel cumprimento do tempo de cobertura contratado, conforme especificado no formulário de contratação."}),e.jsx("p",{children:"Entregar todas as fotografias editadas, com a devida correção de cores, no prazo máximo de 15 (quinze) dias úteis após a realização do evento."}),e.jsx("p",{children:"Entregar, no caso de sessões fotográficas, as imagens em baixa resolução para seleção pelo(a) CONTRATANTE, no prazo de até 3 (três) dias úteis após a realização da sessão."}),e.jsx("p",{children:"Disponibilizar todos os arquivos digitais em alta resolução, devidamente editados e sem marca d'água, para download ou por outro meio previamente acordado entre as partes."})]})]}),e.jsxs("section",{className:"contract-section",children:[e.jsx("h2",{className:"section-title",children:"CLÁUSULA 2ª – DAS OBRIGAÇÕES DO(A) CONTRATANTE"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"Para serviços com duração superior a 6 (seis) horas, fornecer alimentação à equipe (refeição e bebidas não alcoólicas) e disponibilizar um espaço seguro para armazenamento dos equipamentos da CONTRATADA, com acesso exclusivo à equipe."}),e.jsx("p",{children:"Caso não seja possível fornecer alimentação, o(a) CONTRATANTE deverá negociar previamente o valor correspondente ao custo da refeição."}),e.jsx("p",{children:"No caso de sessões fotográficas, selecionar as fotos a serem editadas em até 3 (três) dias úteis após o envio das fotos em baixa resolução, ciente de que o não cumprimento desse prazo poderá atrasar a entrega final."}),e.jsx("p",{children:"Realizar o pagamento conforme estipulado neste contrato:"}),e.jsxs("ul",{className:"list-disc ml-6 space-y-2",children:[e.jsx("li",{children:"20% (vinte por cento) do valor total a título de reserva da data;"}),e.jsx("li",{children:"O restante do valor no dia do evento, antes do início dos serviços."})]}),e.jsx("p",{children:"Cumprir rigorosamente os horários contratados, definidos exclusivamente pelo(a) CONTRATANTE. A CONTRATADA não se responsabiliza por atrasos de serviços terceiros que resultem na necessidade de contratação de horas extras."}),e.jsx("p",{children:"Caso o(a) CONTRATANTE deseje contratar horas extras no dia do evento, isso estará sujeito à disponibilidade do calendário da CONTRATADA, que poderá aceitar ou recusar a solicitação."}),e.jsx("p",{children:"Conferir o material entregue e, caso encontre inconsistências, informar à CONTRATADA em até 5 (cinco) dias úteis após o recebimento. Findo esse prazo, não serão aceitas reclamações ou solicitações de modificações."})]})]}),e.jsxs("section",{className:"contract-section",children:[e.jsx("h2",{className:"section-title",children:"CLÁUSULA 3ª – DO ENSAIO PRÉ-WEDDING OU ENSAIO FOTOGRÁFICO"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"No caso de contratação de ensaio pré-wedding ou ensaio fotográfico, o(a) CONTRATANTE deverá informar à CONTRATADA a data escolhida com, no mínimo, 15 (quinze) dias de antecedência, para que a equipe possa se organizar e enviar o formulário de agendamento."}),e.jsx("p",{children:"Quando se tratar de casamento, o ensaio pré-wedding deverá ser realizado até 15 (quinze) dias antes da data do evento."})]})]}),e.jsxs("section",{className:"contract-section",children:[e.jsx("h2",{className:"section-title",children:"CLÁUSULA 4ª – DAS HORAS EXTRAS E ATRASOS"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"O(a) CONTRATANTE reconhece que os horários contratados são previamente definidos por ele(a) e que devem ser rigorosamente cumpridos."}),e.jsx("p",{children:"A CONTRATADA não se responsabiliza por atrasos de terceiros (como cerimônias religiosas, buffets, maquiadores, etc.) que impactem na realização do evento e demandem horas extras."}),e.jsx("p",{children:"A contratação de horas extras no dia do evento estará sujeita à disponibilidade da agenda da CONTRATADA, que se reserva o direito de aceitar ou recusar tal solicitação."})]})]}),e.jsxs("section",{className:"contract-section",children:[e.jsx("h2",{className:"section-title",children:"CLÁUSULA 5ª – DA RESCISÃO E MUDANÇA DE DATA"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"O contrato poderá ser rescindido por qualquer das partes mediante aviso prévio por escrito de, no mínimo, 30 (trinta) dias."}),e.jsx("p",{children:"Em caso de desistência injustificada pelo(a) CONTRATANTE, o valor pago a título de reserva de data (20%) não será devolvido."}),e.jsx("p",{children:"Se a rescisão ocorrer por parte da CONTRATADA sem justa causa, esta deverá restituir integralmente os valores pagos, acrescidos de multa de 1/3 (um terço) sobre o valor já pago."}),e.jsx("p",{children:"Em caso de mudança de data do evento, o(a) CONTRATANTE deverá informar à CONTRATADA com antecedência mínima de 30 (trinta) dias, ficando a alteração condicionada à disponibilidade da agenda."}),e.jsx("p",{children:"Caso a nova data não esteja disponível, aplicam-se as disposições de rescisão previstas nos itens anteriores."})]})]}),e.jsxs("section",{className:"contract-section",children:[e.jsx("h2",{className:"section-title",children:"CLÁUSULA 6ª – DA CLÁUSULA PENAL"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"O descumprimento, por qualquer das partes, das obrigações assumidas neste contrato, sujeitará a parte infratora ao pagamento de multa equivalente a 1/3 (um terço) do valor total do contrato, sem prejuízo de eventuais perdas e danos."}),e.jsx("p",{children:"A cláusula penal não afasta a possibilidade de cobrança judicial ou extrajudicial de danos adicionais comprovadamente sofridos pela parte prejudicada."}),e.jsx("p",{children:"No caso de a CONTRATADA não comparecer no dia do evento ou não entregar o material contratado nos prazos estabelecidos, a multa será aplicada de forma imediata, facultando ao(à) CONTRATANTE a execução do contrato e o ajuizamento de ação para reparação integral dos prejuízos, incluindo eventual indenização por danos morais."}),e.jsx("p",{children:"Em caso fortuito ou força maior, devidamente comprovados, não se aplicam as penalidades acima descritas, sendo o contrato desfeito sem prejuízo a ambas as partes."})]})]})]}),e.jsxs("div",{className:"flex justify-center space-x-4 mt-12 pt-8 border-t",children:[e.jsx(Y,{variant:"secondary",onClick:a,children:"Cancelar"}),e.jsx(Y,{variant:"primary",onClick:s,children:"Li e Aceito os Termos - Continuar"})]})]})]}),e.jsx("style",{children:`
        .contract-section {
          @apply border-b border-gray-200 pb-8;
        }
        .section-title {
          @apply text-xl font-bold mb-6 text-primary relative pb-2;
        }
        .section-title::after {
          content: '';
          @apply absolute bottom-0 left-0 w-16 h-0.5 bg-secondary;
        }
      `})]})};var Ne={exports:{}};/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function X(t,a,s){this.x=t,this.y=a,this.time=s||new Date().getTime()}X.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};X.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};X.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function de(t,a,s,n){this.startPoint=t,this.control1=a,this.control2=s,this.endPoint=n}de.prototype.length=function(){for(var t=10,a=0,s=void 0,n=void 0,o=0;o<=t;o+=1){var r=o/t,m=this._point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this._point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var h=m-s,d=l-n;a+=Math.sqrt(h*h+d*d)}s=m,n=l}return a};de.prototype._point=function(t,a,s,n,o){return a*(1-t)*(1-t)*(1-t)+3*s*(1-t)*(1-t)*t+3*n*(1-t)*t*t+o*t*t*t};function et(t,a,s){var n,o,r,m=null,l=0;s||(s={});var h=function(){l=s.leading===!1?0:Date.now(),m=null,r=t.apply(n,o),m||(n=o=null)};return function(){var d=Date.now();!l&&s.leading===!1&&(l=d);var g=a-(d-l);return n=this,o=arguments,g<=0||g>a?(m&&(clearTimeout(m),m=null),l=d,r=t.apply(n,o),m||(n=o=null)):!m&&s.trailing!==!1&&(m=setTimeout(h,g)),r}}function k(t,a){var s=this,n=a||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=et(k.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=k.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(o){o.which===1&&(s._mouseButtonDown=!0,s._strokeBegin(o))},this._handleMouseMove=function(o){s._mouseButtonDown&&s._strokeMoveUpdate(o)},this._handleMouseUp=function(o){o.which===1&&s._mouseButtonDown&&(s._mouseButtonDown=!1,s._strokeEnd(o))},this._handleTouchStart=function(o){if(o.targetTouches.length===1){var r=o.changedTouches[0];s._strokeBegin(r)}},this._handleTouchMove=function(o){o.preventDefault();var r=o.targetTouches[0];s._strokeMoveUpdate(r)},this._handleTouchEnd=function(o){var r=o.target===s._canvas;r&&(o.preventDefault(),s._strokeEnd(o))},this.on()}k.prototype.clear=function(){var t=this._ctx,a=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,a.width,a.height),t.fillRect(0,0,a.width,a.height),this._data=[],this._reset(),this._isEmpty=!0};k.prototype.fromDataURL=function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Image,o=s.ratio||window.devicePixelRatio||1,r=s.width||this._canvas.width/o,m=s.height||this._canvas.height/o;this._reset(),n.src=t,n.onload=function(){a._ctx.drawImage(n,0,0,r,m)},this._isEmpty=!1};k.prototype.toDataURL=function(t){var a;switch(t){case"image/svg+xml":return this._toSVG();default:for(var s=arguments.length,n=Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];return(a=this._canvas).toDataURL.apply(a,[t].concat(n))}};k.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};k.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};k.prototype.isEmpty=function(){return this._isEmpty};k.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};k.prototype._strokeUpdate=function(t){var a=t.clientX,s=t.clientY,n=this._createPoint(a,s),o=this._data[this._data.length-1],r=o&&o[o.length-1],m=r&&n.distanceTo(r)<this.minDistance;if(!(r&&m)){var l=this._addPoint(n),h=l.curve,d=l.widths;h&&d&&this._drawCurve(h,d.start,d.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}};k.prototype._strokeEnd=function(t){var a=this.points.length>2,s=this.points[0];if(!a&&s&&this._drawDot(s),s){var n=this._data[this._data.length-1],o=n[n.length-1];s.equals(o)||n.push({x:s.x,y:s.y,time:s.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};k.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};k.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};k.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};k.prototype._createPoint=function(t,a,s){var n=this._canvas.getBoundingClientRect();return new X(t-n.left,a-n.top,s||new Date().getTime())};k.prototype._addPoint=function(t){var a=this.points,s=void 0;if(a.push(t),a.length>2){a.length===3&&a.unshift(a[0]),s=this._calculateCurveControlPoints(a[0],a[1],a[2]);var n=s.c2;s=this._calculateCurveControlPoints(a[1],a[2],a[3]);var o=s.c1,r=new de(a[1],n,o,a[2]),m=this._calculateCurveWidths(r);return a.shift(),{curve:r,widths:m}}return{}};k.prototype._calculateCurveControlPoints=function(t,a,s){var n=t.x-a.x,o=t.y-a.y,r=a.x-s.x,m=a.y-s.y,l={x:(t.x+a.x)/2,y:(t.y+a.y)/2},h={x:(a.x+s.x)/2,y:(a.y+s.y)/2},d=Math.sqrt(n*n+o*o),g=Math.sqrt(r*r+m*m),N=l.x-h.x,_=l.y-h.y,u=g/(d+g),T={x:h.x+N*u,y:h.y+_*u},w=a.x-T.x,c=a.y-T.y;return{c1:new X(l.x+w,l.y+c),c2:new X(h.x+w,h.y+c)}};k.prototype._calculateCurveWidths=function(t){var a=t.startPoint,s=t.endPoint,n={start:null,end:null},o=this.velocityFilterWeight*s.velocityFrom(a)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(o);return n.start=this._lastWidth,n.end=r,this._lastVelocity=o,this._lastWidth=r,n};k.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};k.prototype._drawPoint=function(t,a,s){var n=this._ctx;n.moveTo(t,a),n.arc(t,a,s,0,2*Math.PI,!1),this._isEmpty=!1};k.prototype._drawCurve=function(t,a,s){var n=this._ctx,o=s-a,r=Math.floor(t.length());n.beginPath();for(var m=0;m<r;m+=1){var l=m/r,h=l*l,d=h*l,g=1-l,N=g*g,_=N*g,u=_*t.startPoint.x;u+=3*N*l*t.control1.x,u+=3*g*h*t.control2.x,u+=d*t.endPoint.x;var T=_*t.startPoint.y;T+=3*N*l*t.control1.y,T+=3*g*h*t.control2.y,T+=d*t.endPoint.y;var w=a+d*o;this._drawPoint(u,T,w)}n.closePath(),n.fill()};k.prototype._drawDot=function(t){var a=this._ctx,s=typeof this.dotSize=="function"?this.dotSize():this.dotSize;a.beginPath(),this._drawPoint(t.x,t.y,s),a.closePath(),a.fill()};k.prototype._fromData=function(t,a,s){for(var n=0;n<t.length;n+=1){var o=t[n];if(o.length>1)for(var r=0;r<o.length;r+=1){var m=o[r],l=new X(m.x,m.y,m.time),h=m.color;if(r===0)this.penColor=h,this._reset(),this._addPoint(l);else if(r!==o.length-1){var d=this._addPoint(l),g=d.curve,N=d.widths;g&&N&&a(g,N,h)}}else{this._reset();var _=o[0];s(_)}}};k.prototype._toSVG=function(){var t=this,a=this._data,s=this._canvas,n=Math.max(window.devicePixelRatio||1,1),o=0,r=0,m=s.width/n,l=s.height/n,h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttributeNS(null,"width",s.width),h.setAttributeNS(null,"height",s.height),this._fromData(a,function(p,E,i){var x=document.createElement("path");if(!isNaN(p.control1.x)&&!isNaN(p.control1.y)&&!isNaN(p.control2.x)&&!isNaN(p.control2.y)){var y="M "+p.startPoint.x.toFixed(3)+","+p.startPoint.y.toFixed(3)+" "+("C "+p.control1.x.toFixed(3)+","+p.control1.y.toFixed(3)+" ")+(p.control2.x.toFixed(3)+","+p.control2.y.toFixed(3)+" ")+(p.endPoint.x.toFixed(3)+","+p.endPoint.y.toFixed(3));x.setAttribute("d",y),x.setAttribute("stroke-width",(E.end*2.25).toFixed(3)),x.setAttribute("stroke",i),x.setAttribute("fill","none"),x.setAttribute("stroke-linecap","round"),h.appendChild(x)}},function(p){var E=document.createElement("circle"),i=typeof t.dotSize=="function"?t.dotSize():t.dotSize;E.setAttribute("r",i),E.setAttribute("cx",p.x),E.setAttribute("cy",p.y),E.setAttribute("fill",p.color),h.appendChild(E)});var d="data:image/svg+xml;base64,",g='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+o+" "+r+" "+m+" "+l+'"')+(' width="'+m+'"')+(' height="'+l+'"')+">",N=h.innerHTML;if(N===void 0){var _=document.createElement("dummy"),u=h.childNodes;_.innerHTML="";for(var T=0;T<u.length;T+=1)_.appendChild(u[T].cloneNode(!0));N=_.innerHTML}var w="</svg>",c=g+N+w;return d+btoa(c)};k.prototype.fromData=function(t){var a=this;this.clear(),this._fromData(t,function(s,n){return a._drawCurve(s,n.start,n.end)},function(s){return a._drawDot(s)}),this._data=t};k.prototype.toData=function(){return this._data};const tt=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"})),st=we(tt);var oe={exports:{}},xe;function at(){return xe||(xe=1,function(t,a){(function(s,n){t.exports=n()})(fe,function(){return function(s){function n(r){if(o[r])return o[r].exports;var m=o[r]={exports:{},id:r,loaded:!1};return s[r].call(m.exports,m,m.exports,n),m.loaded=!0,m.exports}var o={};return n.m=s,n.c=o,n.p="",n(0)}([function(s,n){function o(d){var g=d.getContext("2d"),N=d.width,_=d.height,u=g.getImageData(0,0,N,_).data,T=l(!0,N,_,u),w=l(!1,N,_,u),c=h(!0,N,_,u),p=h(!1,N,_,u),E=p-c+1,i=w-T+1,x=g.getImageData(c,T,E,i);return d.width=E,d.height=i,g.clearRect(0,0,E,i),g.putImageData(x,0,0),d}function r(d,g,N,_){return{red:_[4*(N*g+d)],green:_[4*(N*g+d)+1],blue:_[4*(N*g+d)+2],alpha:_[4*(N*g+d)+3]}}function m(d,g,N,_){return r(d,g,N,_).alpha}function l(d,g,N,_){for(var u=d?1:-1,T=d?0:N-1,w=T;d?w<N:w>-1;w+=u)for(var c=0;c<g;c++)if(m(c,w,g,_))return w;return null}function h(d,g,N,_){for(var u=d?1:-1,T=d?0:g-1,w=T;d?w<g:w>-1;w+=u)for(var c=0;c<N;c++)if(m(w,c,g,_))return w;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o}])})}(oe)),oe.exports}(function(t,a){(function(s,n){t.exports=n(Me(),I,st,at())})(fe,function(s,n,o,r){return function(m){function l(d){if(h[d])return h[d].exports;var g=h[d]={exports:{},id:d,loaded:!1};return m[d].call(g.exports,g,g.exports,l),g.loaded=!0,g.exports}var h={};return l.m=m,l.c=h,l.p="",l(0)}([function(m,l,h){function d(C){return C&&C.__esModule?C:{default:C}}function g(C,j){var O={};for(var P in C)j.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(C,P)&&(O[P]=C[P]);return O}function N(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}function _(C,j){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||typeof j!="object"&&typeof j!="function"?C:j}function u(C,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);C.prototype=Object.create(j&&j.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(C,j):C.__proto__=j)}Object.defineProperty(l,"__esModule",{value:!0});var T=Object.assign||function(C){for(var j=1;j<arguments.length;j++){var O=arguments[j];for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(C[P]=O[P])}return C},w=function(){function C(j,O){for(var P=0;P<O.length;P++){var v=O[P];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(j,v.key,v)}}return function(j,O,P){return O&&C(j.prototype,O),P&&C(j,P),j}}(),c=h(1),p=d(c),E=h(2),i=d(E),x=h(3),y=d(x),b=h(4),S=d(b),R=function(C){function j(){var O,P,v,V;N(this,j);for(var B=arguments.length,q=Array(B),W=0;W<B;W++)q[W]=arguments[W];return P=v=_(this,(O=j.__proto__||Object.getPrototypeOf(j)).call.apply(O,[this].concat(q))),v._sigPad=null,v._excludeOurProps=function(){var f=v.props,A=(f.canvasProps,f.clearOnResize,g(f,["canvasProps","clearOnResize"]));return A},v.getCanvas=function(){return v._canvas},v.getTrimmedCanvas=function(){var f=document.createElement("canvas");return f.width=v._canvas.width,f.height=v._canvas.height,f.getContext("2d").drawImage(v._canvas,0,0),(0,S.default)(f)},v.getSignaturePad=function(){return v._sigPad},v._checkClearOnResize=function(){v.props.clearOnResize&&v._resizeCanvas()},v._resizeCanvas=function(){var f=v.props.canvasProps||{},A=f.width,D=f.height;if(!A||!D){var M=v._canvas,F=Math.max(window.devicePixelRatio||1,1);A||(M.width=M.offsetWidth*F),D||(M.height=M.offsetHeight*F),M.getContext("2d").scale(F,F),v.clear()}},v.on=function(){return window.addEventListener("resize",v._checkClearOnResize),v._sigPad.on()},v.off=function(){return window.removeEventListener("resize",v._checkClearOnResize),v._sigPad.off()},v.clear=function(){return v._sigPad.clear()},v.isEmpty=function(){return v._sigPad.isEmpty()},v.fromDataURL=function(f,A){return v._sigPad.fromDataURL(f,A)},v.toDataURL=function(f,A){return v._sigPad.toDataURL(f,A)},v.fromData=function(f){return v._sigPad.fromData(f)},v.toData=function(){return v._sigPad.toData()},V=P,_(v,V)}return u(j,C),w(j,[{key:"componentDidMount",value:function(){this._sigPad=new y.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var O=this,P=this.props.canvasProps;return i.default.createElement("canvas",T({ref:function(v){O._canvas=v}},P))}}]),j}(E.Component);R.propTypes={velocityFilterWeight:p.default.number,minWidth:p.default.number,maxWidth:p.default.number,minDistance:p.default.number,dotSize:p.default.oneOfType([p.default.number,p.default.func]),penColor:p.default.string,throttle:p.default.number,onEnd:p.default.func,onBegin:p.default.func,canvasProps:p.default.object,clearOnResize:p.default.bool},R.defaultProps={clearOnResize:!0},l.default=R},function(m,l){m.exports=s},function(m,l){m.exports=n},function(m,l){m.exports=o},function(m,l){m.exports=r}])})})(Ne);var rt=Ne.exports;const nt=Ce(rt),ot=({onSave:t,label:a="Assinatura"})=>{const s=I.useRef(null),n=()=>{s.current&&s.current.clear()},o=()=>{if(s.current&&!s.current.isEmpty()){const r=s.current.toDataURL();t(r)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:a}),e.jsx("div",{className:"border border-gray-300 rounded-lg",children:e.jsx(nt,{ref:s,canvasProps:{className:"signature-canvas w-full h-40 rounded-lg",style:{background:"white"}},backgroundColor:"white"})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(Y,{variant:"secondary",onClick:n,type:"button",children:"Limpar"}),e.jsx(Y,{variant:"primary",onClick:o,type:"button",children:"Salvar Assinatura"})]})]})},it=async t=>{var a,s,n,o,r,m,l,h,d,g,N,_,u,T;try{const w=((a=t.cartItems)==null?void 0:a.reduce((b,S)=>{var O;const C=Number(S.price.replace(/[^0-9]/g,""))*S.quantity;return t[`discountCoupon_${(O=t.cartItems)==null?void 0:O.indexOf(S)}`]==="FREE"&&S.id&&S.id.includes("prewedding")&&!S.id.includes("teaser")?b:b+C},0))||0,c=((s=t.storeItems)==null?void 0:s.reduce((b,S)=>b+S.price*S.quantity,0))||0,p=w+c+t.travelCost,E=t.paymentMethod==="cash"?p*.05:0,i=p-E,x={clientName:t.name,clientEmail:t.email,eventType:((o=(n=t.cartItems)==null?void 0:n[0])==null?void 0:o.type)==="events"?"Eventos":((m=(r=t.cartItems)==null?void 0:r[0])==null?void 0:m.type)==="portrait"?"Retratos":"Gestantes",eventDate:(l=t.cartItems)!=null&&l[0]&&t.date_0||"",contractDate:new Date().toISOString().split("T")[0],totalAmount:i,travelFee:t.travelCost,paymentMethod:t.paymentMethod,depositPaid:!1,finalPaymentPaid:!1,eventCompleted:!1,packageTitle:((d=(h=t.cartItems)==null?void 0:h[0])==null?void 0:d.name)||"",packageDuration:((N=(g=t.cartItems)==null?void 0:g[0])==null?void 0:N.duration)||"",eventLocation:(_=t.cartItems)!=null&&_[0]&&t.eventLocation_0||"",eventTime:(u=t.cartItems)!=null&&u[0]&&t.time_0||"",services:t.cartItems||[],storeItems:t.storeItems||[],message:t.message,createdAt:new Date().toISOString()},y=await me(ie(te,"contracts"),{...x,formSnapshot:t});if((((T=t.storeItems)==null?void 0:T.length)||0)>0){const b={clientName:t.name,clientEmail:t.email,items:t.storeItems||[],totalAmount:c,status:"pending",paymentMethod:t.paymentMethod,contractId:y.id,createdAt:new Date().toISOString()};await me(ie(te,"orders"),b)}return y.id}catch(w){throw console.error("Error saving contract:",w),w}},ct=async(t,a)=>{try{const s=_e(te,"contracts",t);await Se(s,a)}catch(s){throw console.error("Error updating contract:",s),s}};class lt{constructor(){this.accessToken=null,this.accessToken=window.__GCAL_TOKEN||null}setAccessToken(a){this.accessToken=a,window.__GCAL_TOKEN=a}isAuthenticated(){return!!this.accessToken}async createEvent(a){var s;if(!this.accessToken)throw new Error('Google Calendar não está autenticado. Execute: window.__GCAL_TOKEN="seu_token_aqui" no console.');try{const n=await fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events",{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){const o=await n.json();throw new Error(`Erro do Google Calendar: ${((s=o.error)==null?void 0:s.message)||"Erro desconhecido"}`)}return await n.json()}catch(n){throw console.error("Erro ao criar evento no Google Calendar:",n),n}}async createBookingEvent(a){var r;const s=new Date(`${a.eventDate}T${a.eventTime}`),n=new Date(s.getTime()+2*60*60*1e3),o={summary:`📸 ${a.eventType} - ${a.clientName}`,description:`
Sessão fotográfica agendada via Wild Pictures Studio

Cliente: ${a.clientName}
Email: ${a.clientEmail}
Telefone: ${a.phone||"Não informado"}
Tipo: ${a.eventType}
Pacote: ${a.packageTitle||"Não especificado"}
Valor: R$ ${((r=a.totalAmount)==null?void 0:r.toFixed(2))||"0,00"}

Observações: ${a.message||"Nenhuma observação adicional"}

Local: ${a.eventLocation||"A definir"}
      `.trim(),start:{dateTime:s.toISOString(),timeZone:"America/Sao_Paulo"},end:{dateTime:n.toISOString(),timeZone:"America/Sao_Paulo"},location:a.eventLocation||"",attendees:[{email:a.clientEmail},{email:"wildpicturesstudio@gmail.com"}]};return await this.createEvent(o)}}const ee=new lt;class dt{constructor(){this.baseUrl=window.location.origin}async createPreference(a){try{const s=(a.cartItems||[]).reduce((T,w)=>{var i;const p=Number(w.price.replace(/[^0-9]/g,""))/100*w.quantity;return a[`discountCoupon_${(i=a.cartItems)==null?void 0:i.indexOf(w)}`]==="FREE"&&w.id&&w.id.includes("prewedding")&&!w.id.includes("teaser")?T:T+p},0),n=(a.storeItems||[]).reduce((T,w)=>T+w.price*w.quantity,0),o=s+n+(a.travelCost||0),r=a.paymentMethod==="cash"?o*.05:0,m=o-r,l=s*.2,h=n*.5,d=l+h,g=[];d>0&&g.push({title:`Sinal - Wild Pictures Studio (${a.eventType})`,quantity:1,unit_price:Math.round(d*100)/100,currency_id:"BRL"}),d===0&&m>0&&g.push({title:"Serviços Adicionais - Wild Pictures Studio",quantity:1,unit_price:Math.round(m*100)/100,currency_id:"BRL"});const N={items:g,payer:{name:a.name,email:a.email,phone:a.phone?{number:a.phone.replace(/\D/g,"")}:void 0},back_urls:{success:`${this.baseUrl}/booking?payment=success`,failure:`${this.baseUrl}/booking?payment=failure`,pending:`${this.baseUrl}/booking?payment=pending`},auto_return:"approved",external_reference:`booking_${Date.now()}`,notification_url:`${this.baseUrl}/api/mercadopago/webhook`},_=typeof window<"u"?localStorage.getItem("mp_access_token"):"",u=await fetch("/api/mercadopago/create-preference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({preference:N,bookingData:a,accessToken:_||void 0})});if(!u.ok){const T=await u.json();throw new Error(T.message||"Erro ao criar preferência de pagamento")}return await u.json()}catch(s){throw console.error("Erro no Mercado Pago:",s),s}}}const mt=new dt,ut=({isOpen:t,onClose:a,bookingData:s,onSuccess:n})=>{var y;const{flags:o}=ve(),r=((y=o.payments)==null?void 0:y.mpEnabled)===!1,[m,l]=I.useState(r?"calendar":"payment"),[h,d]=I.useState(!1),[g,N]=I.useState(null),[_,u]=I.useState(null),T=()=>{const b=(s.cartItems||[]).reduce((B,q)=>{var D;const f=Number(q.price.replace(/[^0-9]/g,""))/100*q.quantity;return s[`discountCoupon_${(D=s.cartItems)==null?void 0:D.indexOf(q)}`]==="FREE"&&q.id&&q.id.includes("prewedding")&&!q.id.includes("teaser")?B:B+f},0),S=(s.storeItems||[]).reduce((B,q)=>B+q.price*q.quantity,0),R=b+S+(s.travelCost||0),C=s.paymentMethod==="cash"?R*.05:0,j=R-C,O=b*.2,P=S*.5,v=O+P,V=j-v;return{total:j,deposit:v,remaining:V}};I.useEffect(()=>{t&&r&&l("calendar")},[t,r]);const w=async()=>{try{if(d(!0),N(null),r){l("calendar");return}if(s.paymentMethod==="pix"||s.paymentMethod==="credit"){const{init_point:b}=await mt.createPreference(s),S=window.open(b,"_blank","width=800,height=600"),R=setInterval(()=>{S!=null&&S.closed&&(clearInterval(R),l("calendar"))},1e3)}else l("calendar")}catch(b){N(b.message||"Erro ao processar pagamento")}finally{d(!1)}},c=async()=>{try{if(d(!0),N(null),!ee.isAuthenticated()){N("Google Calendar não está configurado. Siga as instruções no console para configurar o token.");return}const b=await ee.createBookingEvent(s);u(b),l("success")}catch(b){N(b.message||"Erro ao agendar no Google Calendar")}finally{d(!1)}},p=()=>{n(),a()};if(!t)return null;const{total:E,deposit:i,remaining:x}=T();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsxs("h3",{className:"text-lg font-medium",children:[m==="payment"&&"Confirmar Pagamento",m==="calendar"&&"Agendar no Calendário",m==="success"&&"Agendamento Confirmado"]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(le,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[g&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[e.jsx(ue,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"text-red-700 text-sm",children:g})]}),m==="payment"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Pagamento"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Valor Total:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",E.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sinal (agora):"}),e.jsxs("span",{className:"font-bold text-primary",children:["R$ ",i.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Restante (no evento):"}),e.jsxs("span",{children:["R$ ",x.toFixed(2).replace(".",",")]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ce,{size:20,className:"text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Método de Pagamento"})]}),e.jsxs("p",{className:"text-sm text-blue-700",children:[s.paymentMethod==="pix"&&"PIX - Pagamento instantâneo",s.paymentMethod==="credit"&&"Cartão de Crédito - Parcelamento disponível",s.paymentMethod==="cash"&&"Dinheiro - 5% de desconto aplicado"]})]}),e.jsx("button",{onClick:w,disabled:h,className:"w-full bg-primary text-white py-3 px-4 rounded-lg hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Processando...":"Confirmar Pagamento"})]}),m==="calendar"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{size:48,className:"text-primary mx-auto mb-4"}),e.jsx("h4",{className:"font-medium mb-2",children:"Agendar no Google Calendar"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Vamos adicionar sua sessão ao calendário para não esquecer!"})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Data:"}),e.jsx("span",{className:"font-medium",children:s.eventDate})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Horário:"}),e.jsx("span",{className:"font-medium",children:s.eventTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Local:"}),e.jsx("span",{className:"font-medium",children:s.eventLocation||"A definir"})]})]})}),!ee.isAuthenticated()&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ue,{size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-yellow-700 text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Configuração necessária:"}),e.jsxs("p",{children:["Execute no console: ",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"window.__GCAL_TOKEN='seu_token_aqui'"})]})]})]})}),e.jsx("button",{onClick:c,disabled:h||!ee.isAuthenticated(),className:"w-full bg-primary text-white py-3 px-4 rounded-lg hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Agendando...":"Agendar no Calendário"}),e.jsx("button",{onClick:()=>l("success"),className:"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300",children:"Pular Agendamento"})]}),m==="success"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Q,{size:48,className:"text-green-600 mx-auto"}),e.jsx("h4",{className:"font-medium text-lg",children:"Tudo Pronto!"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Q,{size:16,className:"text-green-600"}),e.jsx("span",{children:"Pagamento processado"})]}),_&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Q,{size:16,className:"text-green-600"}),e.jsx("span",{children:"Evento adicionado ao calendário"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Q,{size:16,className:"text-green-600"}),e.jsx("span",{children:"Contrato salvo e enviado por email"})]})]}),e.jsx("button",{onClick:p,className:"w-full bg-primary text-white py-3 px-4 rounded-lg hover:bg-opacity-90",children:"Finalizar"})]})]})]})})};function J(t){if(!t)return 0;const a=String(t).replace(/[^0-9.,-]/g,"").replace(/\.(?=\d{3}(\D|$))/g,""),s=a.includes(",")?a.replace(/\./g,"").replace(",","."):a.replace(/\./g,""),n=parseFloat(s);return isNaN(n)?0:n}const ht=({data:t,onConfirm:a,onBack:s})=>{var q,W;const[n,o]=I.useState(""),[r,m]=I.useState(!1),[l,h]=I.useState(!1),[d,g]=I.useState(!1),[N,_]=I.useState(!1),u=I.useRef(null),w=[...ye,...je,...se].find(f=>f.id===t.packageId),c=f=>{o(f),m(!0)},p=()=>{g(!1),a()},E=async()=>{!u.current||!r||(window.scrollTo({top:0,left:0,behavior:"smooth"}),_(!0))},i=async()=>{try{h(!0);const f=await De(u.current),A=await it(t),M=(z=>{const $=z.split(","),L=$[0].match(/:(.*?);/),H=L?L[1]:"application/pdf",K=atob($[1]);let G=K.length;const ae=new Uint8Array(G);for(;G--;)ae[G]=K.charCodeAt(G);return new Blob([ae],{type:H})})(f),F=Ee(Te,`contracts/${typeof window<"u"&&localStorage.getItem("uid")||"anonymous"}/${A}.pdf`);try{await Ae(F,M,{contentType:"application/pdf"});const z=await Pe(F);await ct(A,{pdfUrl:z});const $=document.createElement("a");$.href=z,$.download=`contrato-wild-pictures-studio-${t.name.toLowerCase().replace(/\s+/g,"-")}.pdf`,document.body.appendChild($),$.click(),document.body.removeChild($)}catch(z){console.error("Upload to storage failed",z),z&&z.code==="storage/unauthorized"?alert("No tienes permiso para subir el contrato al Storage. Por favor inicia sesión o contacta al administrador."):alert("Error al subir el contrato al storage. El contrato fue guardado en Firestore, pero no se pudo subir el archivo.")}const U=document.createElement("a");U.href=downloadUrl,U.download=`contrato-wild-pictures-studio-${t.name.toLowerCase().replace(/\s+/g,"-")}.pdf`,document.body.appendChild(U),U.click(),document.body.removeChild(U),g(!0)}catch(f){console.error("Error finalizing contract:",f),alert("Erro ao gerar/salvar o contrato. Por favor, tente novamente.")}finally{h(!1)}},x=f=>ne(new Date(f),"dd 'de' MMMM 'de' yyyy",{locale:he}),y=f=>ne(new Date(`2000-01-01T${f}`),"HH:mm"),b=()=>{const f=(t.cartItems||[]).reduce(($,L,H)=>{const G=J(L.price)*L.quantity;return t[`discountCoupon_${H}`]==="FREE"&&L.id&&L.id.includes("prewedding")&&!L.id.includes("teaser")?$:$+G},0),A=(t.storeItems||[]).reduce(($,L)=>$+Number(L.price)*Number(L.quantity),0),D=f+A+(t.travelCost||0),M=(t.cartItems||[]).reduce(($,L,H)=>{if(t[`discountCoupon_${H}`]==="FREE"&&L.id&&L.id.includes("prewedding")&&!L.id.includes("teaser")){const G=J(L.price);return $+G*L.quantity}return $},0),F=(t.cartItems||[]).reduce(($,L)=>{const H=J(L.price);return $+H*L.quantity},0)+A+(t.travelCost||0),U=t.paymentMethod==="cash"?F*.05:0,z=D-U;return{subtotal:D,couponDiscount:M,paymentDiscount:U,total:z}},S=()=>{const{total:f}=b();if(!(t.cartItems&&t.cartItems.length)&&t.storeItems&&t.storeItems.length){const z=Math.ceil(f*.5),$=Math.max(0,f-z);return{deposit:z,remaining:$,storeOnly:!0}}const D=(t.cartItems||[]).reduce((z,$,L)=>{const K=J($.price)*$.quantity;return t[`discountCoupon_${L}`]==="FREE"&&$.id&&$.id.includes("prewedding")&&!$.id.includes("teaser")?z:z+K},0)+(t.travelCost||0),M=(t.storeItems||[]).reduce((z,$)=>z+Number($.price)*Number($.quantity),0),F=Math.ceil(D*.2+M*.5),U=Math.max(0,f-F);return{deposit:F,remaining:U,storeOnly:!1}},{subtotal:R,couponDiscount:C,paymentDiscount:j,total:O}=b(),P=S(),{deposit:v,remaining:V}=P,B=((q=t.selectedDresses)==null?void 0:q.map(f=>be.find(A=>A.id===f)).filter(Boolean))||[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 pt-32",children:[e.jsxs("div",{ref:u,className:"max-w-4xl mx-auto bg-white shadow-xl rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-primary text-white p-8 text-center relative",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(ge,{size:32,className:"text-white"})}),e.jsx("h1",{className:"text-3xl font-playfair mb-2",children:"Contrato de Prestação de Serviços Fotográficos"}),e.jsx("p",{className:"text-lg text-white/80",children:"Wild Pictures Studio"})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[(!t.cartItems||t.cartItems.length===0)&&t.storeItems&&t.storeItems.length>0?null:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"bg-primary text-white px-8 py-4 border-b",children:e.jsx("h2",{className:"text-xl font-playfair font-medium",children:"Cláusulas Contratuais"})}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"CLÁUSULA 1ª – DAS OBRIGAÇÕES DA CONTRATADA"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"1.1. Comparecer ao evento com antecedência suficiente, garantindo o fiel cumprimento do tempo de cobertura contratado."}),e.jsx("p",{children:"1.2. Entregar todas as fotografias editadas, com correção de cores, no prazo máximo de 15 (quinze) dias úteis após a realização do evento."}),e.jsx("p",{children:"1.3. Disponibilizar todos os arquivos digitais em alta resolução, devidamente editados e sem marca d'água."}),e.jsx("p",{children:"1.4. Manter sigilo sobre as informações pessoais e familiares dos contratantes."})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"CLÁUSULA 2ª – DAS OBRIGAÇÕES DA CONTRATANTE"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"2.1. Realizar o pagamento conforme estipulado: 20% do valor total como sinal de reserva e o restante no dia do evento."}),e.jsx("p",{children:"2.2. Fornecer todas as informações necessárias sobre o evento (horários, locais, pessoas importantes)."}),e.jsx("p",{children:"2.3. Garantir acesso aos locais do evento e cooperação das pessoas envolvidas."}),e.jsx("p",{children:"2.4. Comunicar qualquer alteração com antecedência mínima de 48 horas."})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"CLÁUSULA 3ª – DA ENTREGA E DIREITOS AUTORAIS"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"3.1. As fotografias serão entregues em formato digital através de galeria online privada."}),e.jsx("p",{children:"3.2. Os direitos autorais das fotografias pertencem ao fotógrafo, sendo concedido ao contratante o direito de uso pessoal."}),e.jsx("p",{children:"3.3. É vedada a reprodução comercial das imagens sem autorização expressa da contratada."}),e.jsx("p",{children:"3.4. A contratada poderá utilizar as imagens para fins de divulgação de seu trabalho."})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"CLÁUSULA 4ª – DO CANCELAMENTO E REAGENDAMENTO"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"4.1. Em caso de cancelamento pela contratante com mais de 30 dias de antecedência, será devolvido 50% do valor pago."}),e.jsx("p",{children:"4.2. Cancelamentos com menos de 30 dias não terão devolução do valor pago."}),e.jsx("p",{children:"4.3. Reagendamentos estão sujeitos à disponibilidade da agenda da contratada."}),e.jsx("p",{children:"4.4. Casos de força maior serão analisados individualmente."})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"CLÁUSULA 5ª – DAS DISPOSIÇÕES GERAIS"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"5.1. Este contrato é regido pelas leis brasileiras."}),e.jsx("p",{children:"5.2. Eventuais conflitos serão resolvidos preferencialmente por mediação."}),e.jsx("p",{children:"5.3. As partes elegem o foro da comarca de Curitiba/PR para dirimir questões oriundas deste contrato."}),e.jsx("p",{children:"5.4. Este contrato entra em vigor na data de sua assinatura."})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"CLÁUSULA 6ª – DA CLÁUSULA PENAL"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"6.1. O descumprimento, por qualquer das partes, das obrigações assumidas neste contrato, sujeitará a parte infratora ao pagamento de multa equivalente a 1/3 (um terço) do valor total do contrato, sem prejuízo de eventuais perdas e danos."}),e.jsx("p",{children:"6.2. A cláusula penal não afasta a possibilidade de cobrança judicial ou extrajudicial de danos adicionais comprovadamente sofridos pela parte prejudicada."}),e.jsx("p",{children:"6.3. No caso de a CONTRATADA não comparecer no dia do evento ou não entregar o material contratado nos prazos estabelecidos, a multa será aplicada de forma imediata, facultando ao(à) CONTRATANTE a execução do contrato e o ajuizamento de ação para reparação integral dos prejuízos, incluindo eventual indenização por danos morais."}),e.jsx("p",{children:"6.4. Em caso fortuito ou força maior, devidamente comprovados, não se aplicam as penalidades acima descritas, sendo o contrato desfeito sem prejuízo a ambas as partes."})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"bg-primary text-white px-8 py-4 border-b",children:e.jsx("h2",{className:"text-xl font-playfair font-medium",children:"Dados do Contrato"})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"PARTES CONTRATANTES"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"CONTRATADA:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Razão Social:"})," Wild Pictures Studio"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"CNPJ:"})," 52.074.297/0001-33 "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Atividade:"})," Serviços Fotográficos Profissionais"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Endereço:"})," R. Ouro Verde, 314 - Jardim Santa Monica, Piraquara - PR, 83302-080 "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contato:"})," +55 41 98487-5565"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dados de cobrança via PIX:"})," 713.343.922-00"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"CONTRATANTE:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"CPF:"})," ",t.cpf]}),e.jsxs("p",{children:[e.jsx("strong",{children:"RG:"})," ",t.rg]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Telefone:"})," ",t.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Endereço:"})," ",t.address]})]})]})]})]}),(t.cartItems&&t.cartItems.length>0||t.storeItems&&t.storeItems.length>0)&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"OBJETO DO CONTRATO"}),t.cartItems&&t.cartItems.length>0?e.jsxs("div",{className:"space-y-6",children:[t.cartItems.map((f,A)=>e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-medium text-primary mb-4",children:["Serviço #",A+1,": ",f.name]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Tipo de Serviço:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:f.type==="events"?"Eventos":f.type==="portrait"?"Retratos":"Gestantes"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Pacote Contratado:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:f.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Duração:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:f.duration})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Quantidade:"}),e.jsxs("span",{className:"font-medium text-gray-900 ml-2",children:[f.quantity,"x"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Data do Evento:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:t[`date_${A}`]?x(t[`date_${A}`]):"Não informada"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Horário:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:t[`time_${A}`]?y(t[`time_${A}`]):"Não informado"})]}),e.jsxs("div",{className:"flex items-center md:col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Local:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:t[`eventLocation_${A}`]||"Não informado"})]})]}),f.type==="maternity"&&B.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium text-primary mb-2",children:"Vestidos Selecionados"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:B.map(D=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg mb-2",children:e.jsx("img",{loading:"lazy",src:D.image,alt:D.name,className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.name}),e.jsx("p",{className:"text-xs text-gray-600",children:D.color})]},D.id))})]})]})]},`service-${A}`)),t.storeItems&&t.storeItems.length>0&&e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"text-lg font-medium text-primary mb-4",children:"Produtos da Loja"}),e.jsx("div",{className:"space-y-3",children:t.storeItems.map((f,A)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[f.image_url?e.jsx("img",{loading:"lazy",src:f.image_url,alt:f.name,className:"w-12 h-12 object-cover rounded"}):null,e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:f.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Quantidade: ",f.quantity]})]})]}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["R$ ",(Number(f.price)*Number(f.quantity)).toFixed(2).replace(".",",")]})]},`obj-store-${A}`))})]})]}):e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-600",children:"Nenhum serviço contratado"})})]}),(()=>{const f=!!(t.cartItems&&t.cartItems.length),A=!!(t.storeItems&&t.storeItems.length),M=(()=>{if(!w)return null;const F=(w.features||[]).find(z=>/Entrega em\s+\d+\s+dias/i.test(z));if(!F)return null;const U=F.match(/Entrega em\s+(\d+)\s+dias/i);return U?parseInt(U[1],10):null})();return f||A?e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"ENTREGA"}),e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg",children:e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[f&&e.jsxs("p",{children:[e.jsx("strong",{children:"Fotos digitais:"})," ",M??15," dias úteis"]}),A&&e.jsxs("p",{children:[e.jsx("strong",{children:"Material físico:"})," 30 dias úteis"]})]})})]}):null})(),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"RESUMO DOS SERVIÇOS"}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsxs("div",{className:"space-y-4",children:[(W=t.cartItems)==null?void 0:W.map((f,A)=>{const M=J(f.price)*f.quantity,U=t[`discountCoupon_${A}`]==="FREE"&&f.id&&f.id.includes("prewedding")&&!f.id.includes("teaser");return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-700",children:[f.name," (",f.quantity,"x):"]}),U?e.jsxs("span",{className:"space-x-2",children:[e.jsxs("span",{className:"line-through text-gray-500",children:["R$ ",M.toFixed(2).replace(".",",")]}),e.jsx("span",{className:"text-green-600 font-bold",children:"R$ 0,00"})]}):e.jsxs("span",{className:"font-medium text-gray-900",children:["R$ ",M.toFixed(2).replace(".",",")]})]},`summary-${A}`)}),t.storeItems&&t.storeItems.length>0&&e.jsx(e.Fragment,{children:t.storeItems.map((f,A)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-700",children:[f.name," (",f.quantity,"x):"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["R$ ",(f.price*f.quantity).toFixed(2).replace(".",",")]})]},`store-financial-${A}`))}),t.travelCost>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Taxa de Deslocamento:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["R$ ",t.travelCost.toFixed(2).replace(".",",")]})]}),C>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[e.jsx("span",{className:"font-medium",children:"Desconto por Cupons:"}),e.jsxs("span",{className:"font-medium",children:["- R$ ",C.toFixed(2).replace(".",",")]})]}),j>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[e.jsx("span",{className:"font-medium",children:"Desconto (Pagamento à Vista):"}),e.jsxs("span",{className:"font-medium",children:["- R$ ",j.toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-medium text-primary",children:"VALOR TOTAL:"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",O.toFixed(2).replace(".",",")]})]})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-300",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Forma de Pagamento:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:P.storeOnly?"Sinal (50%)":"Sinal (20% de sinal + 50% serv. adicional)"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:["R$ ",v.toFixed(2).replace(".",",")]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Na assinatura do contrato"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:P.storeOnly?"Saldo Restante (50%)":"Saldo Restante (80%)"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["R$ ",V.toFixed(2).replace(".",",")]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No dia do evento"})]})})]}),(()=>{var A;const f=((A=t.cartItems)==null?void 0:A.filter((D,M)=>t[`discountCoupon_${M}`]==="FREE"&&D.id&&D.id.includes("prewedding")&&!D.id.includes("teaser")))||[];if(f.length>0){const D=f.reduce((M,F)=>{const U=J(F.price);return M+U*F.quantity},0);return e.jsxs("div",{className:"mt-4 bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Cupons Aplicados"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["- R$ ",D.toFixed(2).replace(".",",")]})]}),e.jsx("div",{className:"text-xs text-green-600",children:f.map((M,F)=>e.jsxs("div",{children:["• ",M.name," - Cupom FREE"]},F))})]})}return null})(),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Método de Pagamento:"})," ",t.paymentMethod==="cash"?"Dinheiro (5% desconto)":t.paymentMethod==="credit"?"Cartão de Crédito":"PIX"]})})]})]})]}),t.message&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4 pb-2 border-b border-secondary",children:"OBSERVAÇÕES ADICIONAIS"}),e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg",children:e.jsx("p",{className:"text-gray-700",children:t.message})})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"bg-primary text-white px-8 py-4 border-b",children:e.jsx("h2",{className:"text-xl font-playfair font-medium",children:"Assinaturas das Partes"})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-primary mb-4",children:"CONTRATADA"}),e.jsx("div",{className:"mb-4 h-20 flex items-center justify-center",children:e.jsx("img",{src:"/firma_fotografo.png",alt:"Assinatura do Fotógrafo",width:150,height:64,className:"max-h-16"})}),e.jsxs("div",{className:"border-t border-gray-300 pt-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Wild Pictures Studio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"CNPJ: 52.074.297/0001-33"})]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-primary mb-4",children:"CONTRATANTE"}),r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 h-20 flex items-center justify-center",children:e.jsx("img",{src:n,alt:"Assinatura do Cliente",className:"max-h-16"})}),e.jsxs("div",{className:"border-t border-gray-300 pt-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["CPF: ",t.cpf]})]})]}):e.jsx(ot,{onSave:c,label:"Assinatura do Cliente"})]})})]})})]}),e.jsxs("p",{className:"text-center text-gray-600 mb-8",children:["Curitiba, ",ne(new Date,"dd 'de' MMMM 'de' yyyy",{locale:he})]})]})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 pb-12",children:e.jsxs("div",{className:"flex justify-center space-x-4 mt-8",children:[e.jsx(Y,{variant:"secondary",onClick:s,disabled:l,children:"Voltar"}),e.jsx(Y,{variant:"primary",onClick:E,disabled:!r||l,children:l?"Gerando PDF...":"Confirmar Pagamento e Agendar"})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative",children:[e.jsx("button",{onClick:p,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:e.jsx(le,{size:24})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(Q,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contrato Enviado com Sucesso!"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Cópia enviada para o estúdio"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:["Cópia enviada para: ",e.jsx("strong",{children:t.email})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"PDF gerado e baixado automaticamente"})]})]}),e.jsx("button",{onClick:p,className:"w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-opacity-90 transition-colors",children:"Continuar"})]})]})}),e.jsx(ut,{isOpen:N,onClose:()=>_(!1),bookingData:t,onSuccess:i})]})},xt=({isOpen:t,onClose:a,onAddProducts:s})=>{const[n,o]=I.useState([]),[r,m]=I.useState({}),[l,h]=I.useState(!0),[d,g]=I.useState(null);I.useEffect(()=>{t&&N()},[t]);const N=async()=>{try{h(!0),g(null);const c=ie(te,"products");let p=c;try{p=Re(c,$e("created_at","desc"))}catch{p=c}const i=(await Ie(p)).docs.map(x=>({id:x.id,...x.data()}));o(i||[])}catch(c){console.error("Error fetching products:",c),g("No se pudieron cargar los productos. Puedes continuar sin productos adicionales."),o([])}finally{h(!1)}},_=(c,p)=>{if(p<=0){const E={...r};delete E[c],m(E)}else m(E=>({...E,[c]:p}))},u=()=>{const c=Object.entries(r).map(([p,E])=>{const i=n.find(x=>x.id===p);return{id:p,quantity:E,name:(i==null?void 0:i.name)||"",price:(i==null?void 0:i.price)||0,image_url:(i==null?void 0:i.image_url)||""}});s(c),a()},T=()=>Object.entries(r).reduce((c,[p,E])=>{const i=n.find(x=>x.id===p);return c+((i==null?void 0:i.price)||0)*E},0),w=()=>Object.values(r).reduce((c,p)=>c+p,0);return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-playfair",children:"Tem interesse em algum produto adicional?"}),e.jsx("p",{className:"text-white/80 mt-1",children:"Complemente sua sessão com nossos produtos exclusivos"})]}),e.jsx("button",{onClick:a,className:"text-white hover:text-gray-300 p-2",children:e.jsx(le,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando produtos..."})]}):d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(re,{size:48,className:"mx-auto mb-4 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Produtos não disponíveis"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d}),e.jsx("p",{className:"text-sm text-gray-500",children:"Você pode continuar com sua reserva sem produtos adicionais."})]}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(re,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Não há produtos disponíveis"}),e.jsx("p",{className:"text-gray-600",children:"Atualmente não temos produtos adicionais para oferecer."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(c=>e.jsxs("div",{className:"bg-gray-50 rounded-lg overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c.image_url,alt:c.name,className:"w-full h-40 object-cover"}),c.custom_text&&e.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-xs",children:c.custom_text}),e.jsx("div",{className:"absolute top-2 left-2 bg-primary bg-opacity-80 text-white px-2 py-1 rounded text-xs",children:"FOTO"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:c.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:c.description}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("span",{className:"text-lg font-bold text-primary",children:["R$ ",c.price.toFixed(2)]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(c.id,(r[c.id]||0)-1),className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 disabled:opacity-50",disabled:!r[c.id],children:"-"}),e.jsx("span",{className:"w-8 text-center font-medium",children:r[c.id]||0}),e.jsx("button",{onClick:()=>_(c.id,(r[c.id]||0)+1),className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center hover:bg-opacity-90",children:"+"})]}),r[c.id]&&e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["R$ ",(c.price*r[c.id]).toFixed(2)]})]})]})]},c.id))})}),e.jsxs("div",{className:"border-t bg-gray-50 p-6 flex-shrink-0",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(re,{size:20}),e.jsxs("span",{children:[w()," produtos selecionados"]})]}),w()>0&&e.jsxs("div",{className:"text-lg font-bold text-primary",children:["Total: R$ ",T().toFixed(2)]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors min-h-[48px]",children:"Não, obrigado"}),e.jsx("button",{onClick:u,className:"flex-1 bg-primary text-white py-3 px-6 rounded-lg hover:bg-opacity-90 transition-colors min-h-[48px]",children:w()>0?"Adicionar à minha reserva":"Continuar sem produtos adicionais"})]})]})]})}):null},Ct=()=>{var b,S;const{items:t,clearCart:a,addToCart:s,setIsCartOpen:n}=Oe(),[o,r]=I.useState("contract"),[m,l]=I.useState(!1),[h,d]=I.useState(!1),[g,N]=I.useState({name:"",cpf:"",rg:"",address:"",email:"",phone:"",serviceType:"",packageId:"",quantity:1,selectedDresses:[],eventDate:"",eventTime:"",eventLocation:"",travelCost:0,paymentMethod:"pix",discountCoupon:"",message:"",cartItems:[],storeItems:[]}),_=[...ye,...je,...se],{flags:u}=ve();I.useEffect(()=>{if(t&&t.length>0){console.log("🛒 BookingPage: Cart items found:",t);const R=t.filter(j=>j.type!=="store"),C=t.filter(j=>j.type==="store").map(j=>({id:j.id,name:j.name,price:Number(j.price.replace(/[^0-9]/g,""))/100,quantity:j.quantity,image_url:j.image,description:""}));N(j=>({...j,cartItems:R,storeItems:C,travelCost:R.length===0&&C.length>0?0:j.travelCost})),R.length===0&&C.length>0&&o==="contract"&&r("form")}else console.log("🛒 BookingPage: No cart items found"),N(R=>({...R,cartItems:[],storeItems:[]}))},[t]),I.useEffect(()=>{const R=t==null?void 0:t.some(C=>C.type==="store");o==="contract"&&!h&&!R&&l(!0)},[o,t,h]),I.useEffect(()=>{var R,C;if(o==="contract"){const j=(((R=g.cartItems)==null?void 0:R.length)||0)>0,O=(((C=g.storeItems)==null?void 0:C.length)||0)>0;j&&O&&n(!1)}},[o,g.cartItems,g.storeItems]);const T=()=>{console.log("📋 Contract accepted, moving to form"),r("form")},w=()=>{console.log("📋 Contract rejected, going back"),window.history.back()},c=R=>{console.log("📝 Form submitted:",R),N(R),r("preview")},p=()=>{console.log("🛍️ Store popup closed without products"),l(!1),d(!0)},E=R=>{console.log("🛍️ Adding store products:",R),R.forEach(C=>{for(let j=0;j<C.quantity;j++)s({id:C.id,type:"store",name:C.name,price:Fe(C.price),duration:"",image:C.image_url||""})}),l(!1),d(!0)},i=()=>{console.log("✅ Contract confirmed"),r("complete"),a()},x=()=>{console.log("⬅️ Going back to form"),r("form")},y=()=>{console.log("⬅️ Going back to contract"),r("contract")};return!t||t.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 pt-32",children:e.jsx("div",{className:"max-w-2xl mx-auto px-6 text-center",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-2xl font-playfair mb-4",children:"Carrinho Vazio"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Você precisa adicionar serviços ao carrinho antes de fazer uma reserva."}),e.jsxs("div",{className:"space-y-3",children:[u.pages.portrait&&e.jsx("button",{onClick:()=>window.location.href="/portrait",className:"btn-primary w-full",children:"Ver Sessões de Retratos"}),u.pages.maternity&&e.jsx("button",{onClick:()=>window.location.href="/maternity",className:"btn-secondary w-full",children:"Ver Sessões de Gestantes"}),u.pages.events&&e.jsx("button",{onClick:()=>window.location.href="/events",className:"btn-secondary w-full",children:"Ver Pacotes de Eventos"})]})]})})}):o==="complete"?e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 pt-32",children:e.jsx("div",{className:"max-w-2xl mx-auto px-6 text-center",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-2xl font-playfair mb-4",children:"Reserva Confirmada!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Sua reserva foi processada com sucesso. Você receberá um email de confirmação em breve."}),e.jsx("button",{onClick:()=>window.location.href="/",className:"btn-primary",children:"Voltar ao Início"})]})})}):o==="contract"?m?e.jsx(xt,{isOpen:m,onClose:p,onAddProducts:E}):e.jsx(Ze,{onAccept:T,onReject:w}):o==="preview"?e.jsx(e.Fragment,{children:e.jsx(ht,{data:g,onConfirm:i,onBack:x})}):e.jsx(e.Fragment,{children:e.jsx(Ye,{initialData:g,packages:_,onSubmit:c,onBack:y,isStoreOnly:(((b=g.cartItems)==null?void 0:b.length)||0)===0&&(((S=g.storeItems)==null?void 0:S.length)||0)>0})})};export{Ct as default};
