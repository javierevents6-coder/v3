import{c as R,r as n,f as L,j as a,m as D,E as M,X as b,T,n as I,l as F,p as $}from"./index-CpkSNde8.js";import{P as B}from"./plus-DJX8Dt9Z.js";import{S as G}from"./square-pen-9LV5eYLo.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=R("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),x={type:"portrait",title:"",price:0,duration:"",description:"",features:[],image_url:"",category:""},O=()=>{const[p,f]=n.useState([]),[j,h]=n.useState(!1),[c,N]=n.useState("all"),[i,m]=n.useState(!!(typeof window<"u"&&localStorage.getItem("site_admin_mode"))),[w,u]=n.useState(!1),[l,s]=n.useState(null),[C,d]=n.useState(!1),[r,o]=n.useState(x);n.useEffect(()=>{const e=t=>{const y=(t==null?void 0:t.detail)??!!localStorage.getItem("site_admin_mode");m(!!y),u(!!y)};return window.addEventListener("siteAdminModeChanged",e),window.addEventListener("storage",e),g(),()=>{window.removeEventListener("siteAdminModeChanged",e),window.removeEventListener("storage",e)}},[]);const g=async()=>{try{h(!0);const e=await L();f(e)}catch(e){console.error("Erro ao carregar pacotes",e)}finally{h(!1)}},E=n.useMemo(()=>c==="all"?p:p.filter(e=>e.type===c),[c,p]),S=()=>{if(i){m(!1),u(!1),s(null),d(!1);try{localStorage.removeItem("site_admin_mode")}catch{}window.dispatchEvent(new CustomEvent("siteAdminModeChanged",{detail:!1}))}else{const e=prompt("Senha de administrador:");if(e==="1234"){m(!0),u(!0);try{localStorage.setItem("site_admin_mode","1")}catch{}window.dispatchEvent(new CustomEvent("siteAdminModeChanged",{detail:!0}))}else e!==null&&alert("Senha incorreta")}},k=()=>{o(x),d(!0),s(null)},P=e=>{s(e),d(!1)},_=async()=>{try{if(!r.title||!r.type){alert("Preencha pelo menos tipo e título");return}await I({type:r.type,title:r.title,price:Number(r.price)||0,duration:r.duration||"",description:r.description||"",features:r.features||[],image_url:r.image_url||"",category:r.category||""}),d(!1),o(x),await g()}catch(e){console.error("Erro ao criar pacote",e),alert("Erro ao criar pacote")}},z=async()=>{if(l)try{await F(l.id,l),s(null),await g()}catch(e){console.error("Erro ao salvar pacote",e),alert("Erro ao salvar pacote")}},A=async e=>{if(confirm("Deseja excluir este pacote?"))try{await $(e),await g()}catch(t){console.error("Erro ao excluir pacote",t),alert("Erro ao excluir pacote")}};return a.jsx("section",{className:"pt-32 pb-16",children:a.jsxs("div",{className:"container-custom",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h1",{className:"section-title",children:"Pacotes"}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("button",{onClick:S,className:`p-2 rounded-full ${i?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"} hover:bg-opacity-80`,children:i?a.jsx(D,{size:20}):a.jsx(M,{size:20})})})]}),i&&w&&a.jsxs("div",{className:"mb-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-medium text-blue-800",children:"Painel de Administração"}),a.jsxs("button",{onClick:k,className:"bg-primary text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-opacity-90",children:[a.jsx(B,{size:20}),"Adicionar Pacote"]})]}),C&&a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 mb-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Novo Pacote"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("select",{value:r.type,onChange:e=>o(t=>({...t,type:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"portrait",children:"Retratos"}),a.jsx("option",{value:"maternity",children:"Gestantes"}),a.jsx("option",{value:"events",children:"Eventos"})]}),a.jsx("input",{type:"text",placeholder:"Título",value:r.title,onChange:e=>o(t=>({...t,title:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"number",placeholder:"Preço (R$)",value:r.price,onChange:e=>o(t=>({...t,price:Number(e.target.value)})),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"text",placeholder:"Dura��ão",value:r.duration,onChange:e=>o(t=>({...t,duration:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"text",placeholder:"Categoria (ex.: wedding, prewedding)",value:r.category,onChange:e=>o(t=>({...t,category:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"url",placeholder:"URL da imagem",value:r.image_url,onChange:e=>o(t=>({...t,image_url:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg md:col-span-2"}),a.jsx("textarea",{placeholder:"Descrição",value:r.description,onChange:e=>o(t=>({...t,description:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg md:col-span-2",rows:3}),a.jsx("textarea",{placeholder:"Features (uma por linha)",value:(r.features||[]).join(`
`),onChange:e=>o(t=>({...t,features:e.target.value.split(`
`).filter(Boolean)})),className:"px-4 py-2 border border-gray-300 rounded-lg md:col-span-2",rows:4})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs("button",{onClick:_,className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700",children:[a.jsx(v,{size:16}),"Salvar"]}),a.jsxs("button",{onClick:()=>d(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-gray-700",children:[a.jsx(b,{size:16}),"Cancelar"]})]})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","portrait","maternity","events"].map(e=>a.jsx("button",{onClick:()=>N(e),className:`px-4 py-2 rounded-full ${c===e?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e==="all"?"Todos":e==="portrait"?"Retratos":e==="maternity"?"Gestantes":"Eventos"},e))}),j?a.jsx("div",{children:"Carregando..."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:E.map(e=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden relative",children:[i&&a.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[a.jsx("button",{onClick:()=>P(e),className:"bg-blue-600 text-white p-1 rounded-full hover:bg-blue-700",children:a.jsx(G,{size:14})}),a.jsx("button",{onClick:()=>A(e.id),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700",children:a.jsx(T,{size:14})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("img",{loading:"lazy",src:e.image_url,alt:e.title,className:"w-full h-48 object-cover"}),e.category&&a.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-xs",children:e.category})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-1",children:e.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:e.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xl font-playfair text-primary",children:["R$ ",Number(e.price).toFixed(2)]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/",e.duration]})]})]})]},e.id))}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Editar Pacote"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("select",{value:l.type,onChange:e=>s(t=>t?{...t,type:e.target.value}:null),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"portrait",children:"Retratos"}),a.jsx("option",{value:"maternity",children:"Gestantes"}),a.jsx("option",{value:"events",children:"Eventos"})]}),a.jsx("input",{type:"text",placeholder:"Título",value:l.title,onChange:e=>s(t=>t?{...t,title:e.target.value}:null),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"number",placeholder:"Preço (R$)",value:l.price,onChange:e=>s(t=>t?{...t,price:Number(e.target.value)}:null),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"text",placeholder:"Duração",value:l.duration,onChange:e=>s(t=>t?{...t,duration:e.target.value}:null),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"text",placeholder:"Categoria",value:l.category||"",onChange:e=>s(t=>t?{...t,category:e.target.value}:null),className:"px-4 py-2 border border-gray-300 rounded-lg"}),a.jsx("input",{type:"url",placeholder:"URL da imagem",value:l.image_url,onChange:e=>s(t=>t?{...t,image_url:e.target.value}:null),className:"px-4 py-2 border border-gray-300 rounded-lg md:col-span-2"}),a.jsx("textarea",{placeholder:"Descrição",value:l.description||"",onChange:e=>s(t=>t?{...t,description:e.target.value}:null),className:"px-4 py-2 border border-gray-300 rounded-lg md:col-span-2",rows:3}),a.jsx("textarea",{placeholder:"Features (uma por linha)",value:(l.features||[]).join(`
`),onChange:e=>s(t=>t?{...t,features:e.target.value.split(`
`).filter(Boolean)}:null),className:"px-4 py-2 border border-gray-300 rounded-lg md:col-span-2",rows:4})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs("button",{onClick:z,className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700",children:[a.jsx(v,{size:16}),"Salvar"]}),a.jsxs("button",{onClick:()=>s(null),className:"bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-gray-700",children:[a.jsx(b,{size:16}),"Cancelar"]})]})]})})]})})};export{O as default};
